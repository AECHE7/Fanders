/* Toggleable Sidebar Styles (public) */

/* Sidebar wrapper acts as container only */
.sidebar-wrapper {
    position: relative;
}

/* Sidebar base styles */
.sidebar {
    position: fixed;
    top: 56px; /* Height of navbar */
    left: 0;
    z-index: 1000;
    height: calc(100vh - 56px);
    background-color: #f8f9fa;
    border-right: 1px solid #dee2e6;
    transition: all 0.3s ease;
    overflow: hidden;
    display: block; /* Always show on desktop */
}

/* Expanded sidebar (default state) */
.sidebar-expanded { 
    width: 280px; 
    display: block !important;
}

/* Collapsed sidebar - completely hidden */
.sidebar-collapsed {
    width: 0;
    overflow: hidden;
    border: none;
    transform: translateX(-100%);
    display: none;
}

/* Hide texts when collapsed (desktop) */
.sidebar-collapsed .nav-text,
.sidebar-collapsed .nav-badge,
.sidebar-collapsed .quick-actions-title,
.sidebar-collapsed .quick-action-text { opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; }

.sidebar-collapsed .nav-icon,
.sidebar-collapsed .quick-action-icon { margin-right: 0; text-align: center; width: 100%; }

.sidebar-collapsed .quick-actions { padding: 0.75rem 0.5rem; }
.sidebar-collapsed .quick-action-btn { padding: 0.5rem; justify-content: center; min-height: 40px; }

/* Sidebar toggle button */
.sidebar-toggle { border: none; background: transparent; color: #0d6efd; padding: 0; border-radius: 4px; transition: all 0.2s ease; }
.sidebar-toggle:hover { background-color: rgba(13, 110, 253, 0.1); transform: scale(1.05); }
.sidebar-toggle:focus { box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25); }

/* Layout structure: sidebar + main */
body { display: flex; flex-direction: column; min-height: 100vh; margin: 0; }
.layout { display: flex; flex: 1; position: relative; }

.main-content { 
    flex: 1; 
    display: flex; 
    flex-direction: column; 
    transition: margin-left 0.3s ease, width 0.3s ease; 
    margin-left: 280px; 
    width: calc(100% - 280px);
}

.content-wrapper { 
    padding: 1.5rem 2rem; 
    flex: 1; 
}

.footer { 
    margin-top: auto; 
    width: 100%;
    background-color: #f8f9fa;
    border-top: 1px solid #dee2e6;
}

/* When sidebar is collapsed/hidden */
.layout.sidebar-hidden .main-content { 
    margin-left: 0 !important; 
    width: 100% !important; 
}

/* Responsive adjustments */
@media (min-width: 768px) {
    /* Ensure sidebar is always visible on desktop */
    .sidebar {
        display: block !important;
    }
}

@media (max-width: 767.98px) {
    .sidebar { 
        position: relative; 
        top: auto; 
        height: auto; 
        width: 100% !important; 
        border-right: none; 
        border-bottom: 1px solid #dee2e6;
        display: block !important;
    }
    
    .sidebar-toggle { 
        display: inline-flex !important; 
    }
    
    .main-content { 
        margin-left: 0 !important; 
        width: 100% !important; 
    }
    
    .content-wrapper {
        padding: 1rem !important;
    }
    
    .sidebar-collapsed .nav-text,
    .sidebar-collapsed .nav-badge,
    .sidebar-collapsed .quick-actions-title,
    .sidebar-collapsed .quick-action-text { 
        opacity: 1; 
        visibility: visible; 
    }
    
    .sidebar-collapsed .nav-icon,
    .sidebar-collapsed .quick-action-icon { 
        margin-right: 0.5rem; 
    }
}

/* Smooth transitions */
.nav-item-link, .quick-action-btn, .sidebar-heading { transition: all 0.3s ease; }

/* Loading state */
.sidebar-loading { opacity: 0.7; pointer-events: none; }

/* Animation */
@keyframes slideIn { from { transform: translateX(-100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
.sidebar-expanded { animation: slideIn 0.3s ease; }

/* Accessibility */
.nav-item-link:focus, .quick-action-btn:focus { outline: 2px solid #0d6efd; outline-offset: 2px; }

/* User dropdown menu positioning */
.navbar .dropdown-menu { position: absolute; top: 100%; right: 0; left: auto; z-index: 1050; min-width: 280px; margin-top: 0.125rem; border: 1px solid rgba(0, 0, 0, 0.15); border-radius: 0.375rem; box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15); }
.navbar .nav-item.dropdown { position: static; }
.navbar .dropdown-toggle { position: relative; }
.navbar .dropdown-menu.show { display: block; position: fixed; top: 56px; right: 1rem; left: auto; transform: none; }
